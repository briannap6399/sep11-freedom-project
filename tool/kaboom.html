<script type="module">
import kaboom from "https://unpkg.com/kaboom@3000.0.1/dist/kaboom.mjs";
kaboom();

setGravity(1300);

 loadSprite("marina", "marina-sprite.png");
// add([
//     sprite("marina"),
//     pos(80,50),
//     scale(.5),
//     rotate(180),
//     color(25,25,25),
// ]);


const spriteMarina = add([
    sprite("marina"),
    pos(80,50),
    scale(.75),
    area(),
    body(),
])

// .jump() when "space" key is pressed

onKeyPress("space", () => {
    if (spriteMarina.isGrounded()) {
    spriteMarina.jump()
    }
})

const moveSpeed = 500;
onKeyDown("right", () => {

    spriteMarina.move(moveSpeed,0)
})
onKeyDown("left", () => {

    spriteMarina.move(-moveSpeed,0)
})
add([
    rect(width(), 48),
    pos(0, height() - 48),
    outline(2),
    area(),
    body({ isStatic: true }),
    color(127, 200, 225),
])

loop(3, () => {
    add([
        rect(48, 64),
        area(),
        outline(4),
        pos(width(), height() - 48),
        anchor("botleft"),
        color(255, 180, 255),
        move(LEFT, 240),
        "tree"
    ]);
})
spriteMarina.onCollide("tree", () => {
    addKaboom(spriteMarina.pos);
    shake();

})

scene("game", () => {
    add([
        sprite("Marina"),
    ])
})

scene("lose", () => {
    add([
        text("GAME OVER!"),
        pos(center()),
        anchor("center"),
    ])
})
</script>
